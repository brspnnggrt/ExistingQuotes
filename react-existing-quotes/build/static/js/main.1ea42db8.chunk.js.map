{"version":3,"sources":["logo.svg","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","requestUpdate","window","parent","postMessage","iframe","taskId","query","api","function","arguments","tabId","Columns","Skip","Take","OrderBy","UsePaging","LoadDelegatedApproversQuotes","TabId","response","status","update","event","getInitData","data","find","r","getData","visibleColumns","VisibilityRules","rows","Rows","newColumns","length","map","col","title","vrLabel","field","vrColumnName","state","columns","newData","row","mappedEntries","entries","Data","filter","_ref","_ref2","slicedToArray","k","nc","includes","_ref3","_ref4","Value","push","CryptedOwnerId","CryptedQuoteId","ApproverId","fromEntries","setState","loading","type","lookup","34","63","name","surname","birthYear","birthCity","onMessageReceivedOld","console","log","keys","cells","slice","t","columnName","values","value","_","i","onMessageReceived","runAction","actionId","rowData","cryptedOwnerId","cryptedCartId","approverId","addEventListener","_this2","react_default","a","createElement","className","src","logo","alt","dist_default","actions","icon","tooltip","onClick","Component","reportWebVitals","onPerfEntry","Function","e","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","src_App_0","document","getElementById"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,6SC2JzBC,cA/HX,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACfE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAmDVQ,cAAgB,WACZC,OAAOC,OAAOC,YAAY,CACtBC,OAAQ,wBACRC,OAAQ,8BACRC,MAAO,CAAC,CACJC,IAAK,YACLC,SAAU,cACVC,UAAW,CAAC,CACRC,MAAS,OAEf,CACEH,IAAK,YACLC,SAAU,UACVC,UAAW,CAAC,CACRE,QAAW,CAAC,0BAA2B,mBAAoB,YAAa,eAAgB,WAC5E,cAAe,yBAA0B,cAAe,UACpEC,KAAQ,EACRC,KAAQ,GACRC,QAAW,CAAC,KAAM,QAClBC,WAAa,EACbC,8BAAgC,EAChCC,MAAS,MAGjBC,SAAU,GACVC,OAAQ,WACT,mCA9EY1B,EAiFnB2B,OAAS,SAACC,GAEN,IAAIC,EAAcD,EAAME,KAAKL,SAASM,KAAK,SAAAC,GAAC,MAAc,cAAVA,EAAElB,KAAsC,gBAAfkB,EAAEjB,WACvEkB,EAAUL,EAAME,KAAKL,SAASM,KAAK,SAAAC,GAAC,MAAc,cAAVA,EAAElB,KAAsC,YAAfkB,EAAEjB,WACnEmB,EAAiBL,EAAYC,KAAKK,gBAClCC,EAAOH,EAAQH,KAAKO,KAIpBC,EAAaJ,EAAeK,OAAoBL,EAD5BM,IAAI,SAAAC,GAAS,MAAO,CAAEC,MAAOD,EAAIE,QAASC,MAAOH,EAAII,gBACP7C,EAAK8C,MAAMC,QAS7EC,EAAUZ,EAAKG,OAAuBH,EARfI,IAAI,SAAAS,GAC3B,IACIC,EADkBjD,OAAOkD,QAAQF,EAAIG,MAAMC,OAAO,SAAAC,GAAA,IAAAC,EAAAtD,OAAAuD,EAAA,EAAAvD,CAAAqD,EAAA,GAAEG,EAAFF,EAAA,UAAAA,EAAA,GAAYjB,EAAWE,IAAI,SAAAkB,GAAE,OAAIA,EAAGd,QAAOe,SAASF,KACtEjB,IAAI,SAAAoB,GAAA,IAAAC,EAAA5D,OAAAuD,EAAA,EAAAvD,CAAA2D,EAAA,SAAY,CAAZC,EAAA,GAAAA,EAAA,GAAkBC,SAI1D,OAHAZ,EAAca,KAAK,CAAC,iBAAkBd,EAAIe,iBAC1Cd,EAAca,KAAK,CAAC,gBAAiBd,EAAIgB,iBACzCf,EAAca,KAAK,CAAC,aAAcd,EAAIiB,aAC/BjE,OAAOkE,YAAYjB,KAEoBlD,EAAK8C,MAAMhB,KAG7D9B,EAAKoE,SAAS,CACVC,SAAS,EACTtB,QAAST,EACTR,KAAMkB,KAvGVhD,EAAK8C,MAAQ,CACTuB,SAAS,EACTtB,QAAS,CACL,CAAEL,MAAO,WAAOE,MAAO,QACvB,CAAEF,MAAO,cAAUE,MAAO,WAC1B,CAAEF,MAAO,4BAAcE,MAAO,YAAa0B,KAAM,WACjD,CAAE5B,MAAO,kBAAcE,MAAO,YAAa2B,OAAQ,CAAEC,GAAI,gBAAYC,GAAI,yBAE7E3C,KAAM,CAAC,CAAE4C,KAAM,SAAUC,QAAS,QAASC,UAAW,KAAMC,UAAW,MAE3E7E,EAAK8E,qBAAuB,SAAAlD,GACxBmD,QAAQC,IAAIpD,EAAME,MAClB9B,EAAKoE,SAAS,CACVC,SAAS,EACTtB,QAASnB,EAAME,KAAKiB,QAAQR,OAASX,EAAME,KAAKiB,QAAQP,IAAI,SAAAC,GAAS,MAAO,CAAEC,MAAOD,EAAIC,MAAOE,MAAOH,EAAIiC,QAAa1E,EAAK8C,MAAMC,QACnIjB,KAAMF,EAAME,KAAKM,KAAKG,OAASX,EAAME,KAAKM,KAAKI,IAAI,SAAAS,GAC/C,IAAIgC,EAAOhC,EAAIiC,MAAMC,MAAM,GAAG3C,IAAI,SAAA4C,GAAC,OAAIA,EAAEC,aACrCC,EAASrC,EAAIiC,MAAMC,MAAM,GAAG3C,IAAI,SAAA4C,GAAC,OAAIA,EAAEG,QAE3C,OADWtF,OAAOkE,YAAYc,EAAKzC,IAAI,SAACgD,EAAGC,GAAJ,MAAU,CAACR,EAAKQ,GAAIH,EAAOG,SAEjEzF,EAAK8C,MAAMhB,QAGxB9B,EAAK0F,kBAAoB,SAAA9D,GACrBmD,QAAQC,IAAIpD,EAAME,MACQ,gCAAtBF,EAAME,KAAKlB,QAA0CZ,EAAK2B,OAAOC,GAC3C,wCAAtBA,EAAME,KAAKlB,QAAkDZ,EAAKO,iBAE1EP,EAAK2F,UAAY,SAACC,EAAUC,GACxBrF,OAAOC,OAAOC,YAAY,CACtBC,OAAQ,wBACRC,OAAQ,sCACRC,MAAO,CAAC,CACJC,IAAK,YACLC,SAAU,gBACVC,UAAW,CAAC,CACR4E,SAAUA,EACVE,eAAgBD,EAAQC,eACxBC,cAAeF,EAAQE,cACvBC,WAAYH,EAAQG,eAG5BvE,SAAU,GACVC,OAAQ,WACT,mCAEPlB,OAAOyF,iBAAiB,UAAWjG,EAAK0F,mBAAmB,GAC3D1F,EAAKO,gBAjDUP,wEA6GV,IAAAkG,EAAA/F,KACL,OACIgG,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACXH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,cACdH,EAAAC,EAAAC,cAAA,OAAKE,IAAKC,IAAMF,UAAU,WAAWG,IAAI,UAE7CN,EAAAC,EAAAC,cAACK,EAAAN,EAAD,CACIrD,QAAS5C,KAAK2C,MAAMC,QACpBjB,KAAM3B,KAAK2C,MAAMhB,KACjBY,MAAM,kBACNiE,QAAS,CAAC,CAAEC,KAAM,SAAUC,QAAS,eAAgBC,QAAS,SAAClF,EAAOiE,GAAR,OAAoBK,EAAKP,UAAU,EAAGE,KACpG,CAAEe,KAAM,eAAgBC,QAAS,aAAcC,QAAS,SAAClF,EAAOiE,GAAR,OAAoBK,EAAKP,UAAU,EAAGE,gBA1HhGkB,aCdHC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxCtH,EAAAuH,EAAA,GAAAC,KAAAxH,EAAAyH,KAAA,WAAqBD,KAAK,SAAA9D,GAAiD,IAA9CgE,EAA8ChE,EAA9CgE,OAAQC,EAAsCjE,EAAtCiE,OAAQC,EAA8BlE,EAA9BkE,OAAQC,EAAsBnE,EAAtBmE,OAAQC,EAAcpE,EAAdoE,QAC3DJ,EAAOL,GACPM,EAAON,GACPO,EAAOP,GACPQ,EAAOR,GACPS,EAAQT,MCDdU,IAASC,OACPzB,EAAAC,EAAAC,cAACF,EAAAC,EAAMyB,WAAP,KACE1B,EAAAC,EAAAC,cAACyB,EAAD,OAEFC,SAASC,eAAe,SAM1BhB","file":"static/js/main.1ea42db8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.06e73328.svg\";","import logo from './logo.svg';\nimport './App.css';\n\nimport React, { Component }  from 'react';\nimport MaterialTable from 'material-table'\n// import { v4 as uuidv4 } from 'uuid';\n\n/*\n\n\n<iframe src=\"https://brspnnggrt.github.io/ExistingQuotes/react-existing-quotes/build/index.html\" onload=\"initializeFrame()\"></iframe>\n\n<script>\n\ninitializeFrame = () => {\n\n  let data = JSON.parse(ko.toJSON(cpq.models.cartList.mainGrid));\n  iframe.contentWindow.postMessage(data, \"https://brspnnggrt.github.io/\");\n  window.addEventListener(\"message\", m => eval(m.data[\"execute\"] + \"()\"));\n\n}\n\n</script>\n\n*/\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n            columns: [\n                { title: 'Adı', field: 'name' },\n                { title: 'Soyadı', field: 'surname' },\n                { title: 'Doğum Yılı', field: 'birthYear', type: 'numeric' },\n                { title: 'Doğum Yeri', field: 'birthCity', lookup: { 34: 'İstanbul', 63: 'Şanlıurfa' } }\n            ],\n            data: [{ name: 'Mehmet', surname: 'Baran', birthYear: 1987, birthCity: 63 }]\n        };\n        this.onMessageReceivedOld = event => { /* quote 1.0 cartlist */\n            console.log(event.data);\n            this.setState({\n                loading: false,\n                columns: event.data.columns.length ? event.data.columns.map(col => { return { title: col.title, field: col.name }; }) : this.state.columns,\n                data: event.data.rows.length ? event.data.rows.map(row => {\n                    let keys = row.cells.slice(1).map(t => t.columnName);\n                    let values = row.cells.slice(1).map(t => t.value);\n                    let data = Object.fromEntries(keys.map((_, i) => [keys[i], values[i]]));\n                    return data;\n                }) : this.state.data\n            });\n        };\n        this.onMessageReceived = event => { /* quote 2.0 quotelist */\n            console.log(event.data);\n            if (event.data.taskId === 'react-existing-quotes-query') this.update(event);\n            if (event.data.taskId === 'react-existing-quotes-executeaction') this.requestUpdate();\n        };\n        this.runAction = (actionId, rowData) => {\n            window.parent.postMessage({\n                iframe: 'react-existing-quotes',\n                taskId: 'react-existing-quotes-executeaction',\n                query: [{\n                    api: 'quoteList',\n                    function: 'executeAction',\n                    arguments: [{\n                        actionId: actionId,\n                        cryptedOwnerId: rowData.cryptedOwnerId,\n                        cryptedCartId: rowData.cryptedCartId,\n                        approverId: rowData.approverId\n                    }]\n                }],\n                response: [],\n                status: 'request'\n            }, \"https://sandbox.webcomcpq.com/\");\n        };\n        window.addEventListener(\"message\", this.onMessageReceived, false);\n        this.requestUpdate();\n    }\n\n    requestUpdate = () => {\n        window.parent.postMessage({\n            iframe: 'react-existing-quotes',\n            taskId: 'react-existing-quotes-query',\n            query: [{\n                api: 'quoteList',\n                function: 'getInitData',\n                arguments: [{\n                    'tabId': '0'\n                }]\n            },{\n                api: 'quoteList',\n                function: 'getData',\n                arguments: [{\n                    'Columns': ['SYSTEM_QUOTATION_NUMBER', 'CUSTOMER_COMPANY', 'USER_NAME', 'DATE_CREATED', 'cf_Terms',\n                                'REVISION_ID', 'cf_QuoteExpirationDate', 'TOTALAMOUNT', 'Status'],\n                    'Skip': 0,\n                    'Take': 11,\n                    'OrderBy': ['id', 'desc'],\n                    'UsePaging': true,\n                    'LoadDelegatedApproversQuotes': false,\n                    'TabId': 1\n                }]\n            }],\n            response: [],\n            status: 'request'\n        }, \"https://sandbox.webcomcpq.com/\");\n    };\n\n    update = (event) => {\n        // prepare data\n        let getInitData = event.data.response.find(r => r.api === 'quoteList' && r.function === 'getInitData');\n        let getData = event.data.response.find(r => r.api === 'quoteList' && r.function === 'getData');\n        let visibleColumns = getInitData.data.VisibilityRules;\n        let rows = getData.data.Rows;\n\n        // transform data\n        let mapColumns = c => c.map(col => { return { title: col.vrLabel, field: col.vrColumnName }; });\n        let newColumns = visibleColumns.length ? mapColumns(visibleColumns) : this.state.columns;\n        let mapRowsToData = r => r.map(row => {\n            let filteredEntries = Object.entries(row.Data).filter(([k, v]) => newColumns.map(nc => nc.field).includes(k));\n            let mappedEntries = filteredEntries.map(([k, v]) => [k, v.Value]);\n            mappedEntries.push(['cryptedOwnerId', row.CryptedOwnerId]);\n            mappedEntries.push(['cryptedCartId', row.CryptedQuoteId]);\n            mappedEntries.push(['approverId', row.ApproverId]);\n            return Object.fromEntries(mappedEntries);\n        });\n        let newData = rows.length ? mapRowsToData(rows) : this.state.data;\n\n        // update state if data available\n        this.setState({\n            loading: false,\n            columns: newColumns,\n            data: newData\n        });\n    };\n\n    render() {\n        return (\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                </header>\n                <MaterialTable\n                    columns={this.state.columns}\n                    data={this.state.data}\n                    title=\"Existing Quotes\"\n                    actions={[{ icon: \"delete\", tooltip: \"Delete quote\", onClick: (event, rowData) => this.runAction(2, rowData) },\n                    { icon: \"content_copy\", tooltip: \"Copy quote\", onClick: (event, rowData) => this.runAction(4, rowData) }]}\n                />\n            </div>\n        );\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}