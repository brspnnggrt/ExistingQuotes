{"version":3,"sources":["logo.svg","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onMessageReceived","event","data","taskId","state","taskIdRequestData","update","taskIdRunAction","requestData","window","parent","postMessage","iframe","id","query","api","function","arguments","tabId","Columns","Skip","Take","OrderBy","UsePaging","LoadDelegatedApproversQuotes","TabId","Features","response","status","runAction","actionId","rowData","cryptedOwnerId","cryptedCartId","approverId","getInitData","find","r","getData","featureFlagData","visibleColumns","VisibilityRules","rows","Rows","featureFlag","newColumns","length","map","col","title","vrLabel","field","vrColumnName","columns","newData","row","mappedEntries","entries","Data","filter","_ref","_ref2","slicedToArray","k","nc","includes","_ref3","_ref4","Value","push","CryptedOwnerId","CryptedQuoteId","ApproverId","fromEntries","setState","loading","concat","CopyQuote","addEventListener","_this2","actions","icon","tooltip","onClick","react_default","a","createElement","className","src","logo","alt","dist_default","onChangeRowsPerPage","Component","reportWebVitals","onPerfEntry","Function","e","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","src_App_0","document","getElementById"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,6SCsJzBC,cArIX,SAAAA,EAAYC,GACZ,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACIE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAeVQ,kBAAoB,SAAAC,GAEZA,EAAMC,KAAKC,SAAWV,EAAKW,MAAMC,mBAAmBZ,EAAKa,OAAOL,GAChEA,EAAMC,KAAKC,SAAWV,EAAKW,MAAMG,iBAAiBd,EAAKe,eAnB/Df,EAsBAe,YAAc,WAEVC,OAAOC,OAAOC,YAAY,CACtBC,OAAQnB,EAAKW,MAAMS,GACnBV,OAAQV,EAAKW,MAAMC,kBACnBS,MAAO,CAAC,CACJC,IAAK,uBACLC,SAAU,cACVC,UAAW,CAAC,CACRC,MAAS,OAEf,CACEH,IAAK,uBACLC,SAAU,UACVC,UAAW,CAAC,CACRE,QAAW,CAAC,0BAA2B,mBAAoB,YAAa,eAAgB,WAC5E,cAAe,yBAA0B,cAAe,UACpEC,KAAQ,EACRC,KAAQ,GACRC,QAAW,CAAC,KAAM,QAClBC,WAAa,EACbC,8BAAgC,EAChCC,MAAS,KAEf,CACEV,IAAK,aACLC,SAAU,gBACVC,UAAW,CAAE,cAAe,CAAES,SAAU,CAAC,iBAE7CC,SAAU,GACVC,OAAQ,WACT,mCArDPnC,EAwDAoC,UAAY,SAACC,EAAUC,GAEnBtB,OAAOC,OAAOC,YAAY,CACtBC,OAAQnB,EAAKW,MAAMS,GACnBV,OAAQV,EAAKW,MAAMG,gBACnBO,MAAO,CAAC,CACJC,IAAK,uBACLC,SAAU,gBACVC,UAAW,CAAC,CACRa,SAAUA,EACVE,eAAgBD,EAAQC,eACxBC,cAAeF,EAAQE,cACvBC,WAAYH,EAAQG,eAG5BP,SAAU,GACVC,OAAQ,WACT,mCAzEPnC,EA4EAa,OAAS,SAAAL,GAGL,IAAIkC,EAAclC,EAAMC,KAAKyB,SAASS,KAAK,SAAAC,GAAC,MAAc,yBAAVA,EAAEtB,KAAiD,gBAAfsB,EAAErB,WAClFsB,EAAUrC,EAAMC,KAAKyB,SAASS,KAAK,SAAAC,GAAC,MAAc,yBAAVA,EAAEtB,KAAiD,YAAfsB,EAAErB,WAC9EuB,EAAkBtC,EAAMC,KAAKyB,SAASS,KAAK,SAAAC,GAAC,MAAc,eAAVA,EAAEtB,KAAuC,kBAAfsB,EAAErB,WAC5EwB,EAAiBL,EAAYjC,KAAKuC,gBAClCC,EAAOJ,EAAQpC,KAAKyC,KACpBC,EAAcL,EAAgBrC,KAI9B2C,EAAaL,EAAeM,OAAoBN,EAD5BO,IAAI,SAAAC,GAAS,MAAO,CAAEC,MAAOD,EAAIE,QAASC,MAAOH,EAAII,gBACP3D,EAAKW,MAAMiD,QAS7EC,EAAUZ,EAAKI,OAAuBJ,EARfK,IAAI,SAAAQ,GAC3B,IACIC,EADkB9D,OAAO+D,QAAQF,EAAIG,MAAMC,OAAO,SAAAC,GAAA,IAAAC,EAAAnE,OAAAoE,EAAA,EAAApE,CAAAkE,EAAA,GAAEG,EAAFF,EAAA,UAAAA,EAAA,GAAYhB,EAAWE,IAAI,SAAAiB,GAAE,OAAIA,EAAGb,QAAOc,SAASF,KACtEhB,IAAI,SAAAmB,GAAA,IAAAC,EAAAzE,OAAAoE,EAAA,EAAApE,CAAAwE,EAAA,SAAY,CAAZC,EAAA,GAAAA,EAAA,GAAkBC,SAI1D,OAHAZ,EAAca,KAAK,CAAC,iBAAkBd,EAAIe,iBAC1Cd,EAAca,KAAK,CAAC,gBAAiBd,EAAIgB,iBACzCf,EAAca,KAAK,CAAC,aAAcd,EAAIiB,aAC/B9E,OAAO+E,YAAYjB,KAEoB/D,EAAKW,MAAMF,KAG7DT,EAAKiF,SAAS,CACVC,SAAS,EACTtB,QAASR,EACT3C,KAAMoD,EACNV,YAAaA,KAtGjB,IAAM/B,EAAK,wBAFf,OAGIpB,EAAKW,MAAQ,CACTuE,SAAS,EACT9D,GAAIA,EACJR,kBAAiB,GAAAuE,OAAK/D,EAAL,gBACjBN,gBAAe,GAAAqE,OAAK/D,EAAL,cACfwC,QAAS,GACTnD,KAAM,GACN0C,YAAa,CAACiC,UAAc,IAEhCpE,OAAOqE,iBAAiB,UAAWrF,EAAKO,mBAAmB,GAC3DP,EAAKe,cAbTf,wEA6GA,IAAAsF,EAAAnF,KACQoF,EAAU,CAAC,CAAEC,KAAM,SAAUC,QAAS,eAAgBC,QAAS,SAAClF,EAAO8B,GAAR,OAAoBgD,EAAKlD,UAAU,EAAGE,MAKzG,OAHwC,GAApCnC,KAAKQ,MAAMwC,YAAYiC,WACvBG,EAAQX,KAAK,CAAEY,KAAM,eAAgBC,QAAS,aAAcC,QAAS,SAAClF,EAAO8B,GAAR,OAAoBgD,EAAKlD,UAAU,EAAGE,MAG3GqD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACXH,EAAAC,EAAAC,cAAA,UAAQC,UAAU,kBACdH,EAAAC,EAAAC,cAAA,OAAKE,IAAKC,IAAMF,UAAU,WAAWG,IAAI,UAE7CN,EAAAC,EAAAC,cAACK,EAAAN,EAAD,CACIO,qBAAmB,EACnBvC,QAASzD,KAAKQ,MAAMiD,QACpBnD,KAAMN,KAAKQ,MAAMF,KACjB+C,MAAM,kBACN+B,QAASA,YAjIXa,aCFHC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC3G,EAAA4G,EAAA,GAAAC,KAAA7G,EAAA8G,KAAA,WAAqBD,KAAK,SAAAtC,GAAiD,IAA9CwC,EAA8CxC,EAA9CwC,OAAQC,EAAsCzC,EAAtCyC,OAAQC,EAA8B1C,EAA9B0C,OAAQC,EAAsB3C,EAAtB2C,OAAQC,EAAc5C,EAAd4C,QAC3DJ,EAAOL,GACPM,EAAON,GACPO,EAAOP,GACPQ,EAAOR,GACPS,EAAQT,MCDdU,IAASC,OACPtB,EAAAC,EAAAC,cAACF,EAAAC,EAAMsB,WAAP,KACEvB,EAAAC,EAAAC,cAACsB,EAAD,OAEFC,SAASC,eAAe,SAM1BhB","file":"static/js/main.88f195b1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.06e73328.svg\";","import logo from './logo.svg';\nimport './App.css';\n\nimport React, { Component }  from 'react';\nimport MaterialTable from 'material-table';\n\n/*\n\nUsage: \n<iframe id='react-existing-quotes' src=\"https://brspnnggrt.github.io/ExistingQuotes/react-existing-quotes/build/\" style=\"width: 100%; border: 0px; height: 700px;\"></iframe>\n<script src='https://brspnnggrt.github.io/ExistingQuotes/react-existing-quotes/build/jsom.js'></script>\n\n*/\n\nclass App extends Component \n{\n\n    constructor(props)\n    {\n        super(props);\n        const id = 'react-existing-quotes';\n        this.state = {\n            loading: true,\n            id: id,\n            taskIdRequestData: `${id}-requestData`,\n            taskIdRunAction: `${id}-runAction`,\n            columns: [],\n            data: [],\n            featureFlag: {'CopyQuote' : 0}\n        };\n        window.addEventListener(\"message\", this.onMessageReceived, false);\n        this.requestData();\n    }\n\n    onMessageReceived = event => \n    {\n        if (event.data.taskId === this.state.taskIdRequestData) this.update(event);\n        if (event.data.taskId === this.state.taskIdRunAction) this.requestData();\n    };\n\n    requestData = () => \n    {\n        window.parent.postMessage({\n            iframe: this.state.id,\n            taskId: this.state.taskIdRequestData,\n            query: [{\n                api: '/api/rd/v1/QuoteList',\n                function: 'getInitData',\n                arguments: [{\n                    'tabId': '0'\n                }]\n            },{\n                api: '/api/rd/v1/QuoteList',\n                function: 'getData',\n                arguments: [{\n                    'Columns': ['SYSTEM_QUOTATION_NUMBER', 'CUSTOMER_COMPANY', 'USER_NAME', 'DATE_CREATED', 'cf_Terms',\n                                'REVISION_ID', 'cf_QuoteExpirationDate', 'TOTALAMOUNT', 'Status'],\n                    'Skip': 0,\n                    'Take': 11,\n                    'OrderBy': ['id', 'desc'],\n                    'UsePaging': true,\n                    'LoadDelegatedApproversQuotes': false,\n                    'TabId': 1\n                }]\n            },{\n                api: '/CustomAPI',\n                function: 'ExecuteScript',\n                arguments: [ 'FeatureFlag', { Features: ['CopyQuote']} ]\n            }],\n            response: [],\n            status: 'request'\n        }, \"https://sandbox.webcomcpq.com/\");\n    };\n\n    runAction = (actionId, rowData) => \n    {\n        window.parent.postMessage({\n            iframe: this.state.id,\n            taskId: this.state.taskIdRunAction,\n            query: [{\n                api: '/api/rd/v1/QuoteList',\n                function: 'executeAction',\n                arguments: [{\n                    actionId: actionId,\n                    cryptedOwnerId: rowData.cryptedOwnerId,\n                    cryptedCartId: rowData.cryptedCartId,\n                    approverId: rowData.approverId\n                }]\n            }],\n            response: [],\n            status: 'request'\n        }, \"https://sandbox.webcomcpq.com/\");\n    };\n\n    update = event => \n    {\n        // prepare data\n        let getInitData = event.data.response.find(r => r.api === '/api/rd/v1/QuoteList' && r.function === 'getInitData');\n        let getData = event.data.response.find(r => r.api === '/api/rd/v1/QuoteList' && r.function === 'getData');\n        let featureFlagData = event.data.response.find(r => r.api === '/CustomAPI' && r.function === 'ExecuteScript');\n        let visibleColumns = getInitData.data.VisibilityRules;\n        let rows = getData.data.Rows;\n        let featureFlag = featureFlagData.data;\n\n        // transform data\n        let mapColumns = c => c.map(col => { return { title: col.vrLabel, field: col.vrColumnName }; });\n        let newColumns = visibleColumns.length ? mapColumns(visibleColumns) : this.state.columns;\n        let mapRowsToData = r => r.map(row => {\n            let filteredEntries = Object.entries(row.Data).filter(([k, v]) => newColumns.map(nc => nc.field).includes(k));\n            let mappedEntries = filteredEntries.map(([k, v]) => [k, v.Value]);\n            mappedEntries.push(['cryptedOwnerId', row.CryptedOwnerId]);\n            mappedEntries.push(['cryptedCartId', row.CryptedQuoteId]);\n            mappedEntries.push(['approverId', row.ApproverId]);\n            return Object.fromEntries(mappedEntries);\n        });\n        let newData = rows.length ? mapRowsToData(rows) : this.state.data;\n\n        // update state if data available\n        this.setState({\n            loading: false,\n            columns: newColumns,\n            data: newData,\n            featureFlag: featureFlag\n        });\n    };\n\n    render() \n    {\n        let actions = [{ icon: \"delete\", tooltip: \"Delete quote\", onClick: (event, rowData) => this.runAction(2, rowData) }];\n        \n        if (this.state.featureFlag.CopyQuote == 1)\n            actions.push({ icon: \"content_copy\", tooltip: \"Copy quote\", onClick: (event, rowData) => this.runAction(4, rowData) });\n\n        return (\n            <div className=\"App\">\n                <header className=\"n-8 App-header\">\n                    <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                </header>\n                <MaterialTable\n                    onChangeRowsPerPage\n                    columns={this.state.columns}\n                    data={this.state.data}\n                    title=\"Existing Quotes\"\n                    actions={actions}\n                />\n            </div>\n        );\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}